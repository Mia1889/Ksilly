# Ksilly

**SillyTavern ä¸€é”®éƒ¨ç½²ç®¡ç†è„šæœ¬**

[![Shell](https://img.shields.io/badge/Shell-Bash-green?logo=gnubash&logoColor=white)](https://www.gnu.org/software/bash/)
[![Platform](https://img.shields.io/badge/Platform-Linux%20|%20macOS%20|%20Termux-blue)](https://github.com/Mia1889/Ksilly)
[![Version](https://img.shields.io/badge/Version-2.1.0-purple)](https://github.com/Mia1889/Ksilly)
[![License](https://img.shields.io/badge/License-MIT-yellow)](LICENSE)

ä¸€æ¡å‘½ä»¤å®Œæˆ SillyTavern çš„å®‰è£…ã€é…ç½®ã€æ’ä»¶ç®¡ç†ã€åå°è¿è¡Œä¸æ›´æ–°

</div>

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **ä¸€é”®å®‰è£…** â€” è‡ªåŠ¨å®‰è£… Node.jsã€Git ç­‰å…¨éƒ¨ä¾èµ–ï¼Œå…‹éš†ä»“åº“å¹¶å®Œæˆé…ç½®
- ğŸ§© **æ’ä»¶ç®¡ç†** â€” å†…ç½®å¸¸ç”¨æ’ä»¶ä¸€é”®å®‰è£… / æ›´æ–° / å¸è½½ï¼Œè‡ªåŠ¨é€‚é…å›½å†…å¤–ç½‘ç»œæº
- ğŸŒ **å›½å†…åŠ é€Ÿ** â€” è‡ªåŠ¨æ£€æµ‹ç½‘ç»œç¯å¢ƒï¼Œå¤§é™†ç”¨æˆ·è‡ªåŠ¨å¯ç”¨ GitHub ä»£ç† + npm é•œåƒ
- ğŸ“± **å¤šå¹³å°æ”¯æŒ** â€” Linux æœåŠ¡å™¨ / macOS / Android Termux å…¨è¦†ç›–
- ğŸ”§ **äº¤äº’å¼é…ç½®** â€” å¼•å¯¼å¼è®¾ç½®ç›‘å¬ã€ç«¯å£ã€è®¤è¯ã€ç™½åå•ç­‰å¸¸ç”¨é€‰é¡¹
- ğŸ”„ **PM2 åå°è¿è¡Œ** â€” å…³é—­ç»ˆç«¯ä¸ä¸­æ–­ï¼Œå´©æºƒè‡ªåŠ¨é‡å¯ï¼Œæ”¯æŒå¼€æœºè‡ªå¯
- ğŸ›¡ï¸ **é˜²ç«å¢™ç®¡ç†** â€” è‡ªåŠ¨è¯†åˆ«å¹¶æ”¾è¡Œ UFW / firewalld / iptables ç«¯å£
- ğŸ“¦ **ä¸€é”®æ›´æ–°** â€” è‡ªåŠ¨å¤‡ä»½é…ç½®ï¼Œæ‹‰å–æœ€æ–°ä»£ç ï¼Œæ›´æ–°ä¾èµ–åæ¢å¤é…ç½®
- ğŸ—‘ï¸ **å®Œæ•´å¸è½½** â€” åœæ­¢è¿›ç¨‹ã€æ¸…ç†æœåŠ¡ã€å¯é€‰å¤‡ä»½æ•°æ®ï¼Œå¹²å‡€å½»åº•

---

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

| å¹³å° | è¦æ±‚ |
|------|------|
| **Linux** | Debian / Ubuntu / CentOS / RHEL / Arch / Alpine ç­‰ä¸»æµå‘è¡Œç‰ˆ |
| **macOS** | éœ€è¦ Homebrew |
| **Termux** | Android 7.0+ï¼Œå»ºè®®å®‰è£… Termux:Bootï¼ˆç”¨äºå¼€æœºè‡ªå¯ï¼‰ |

> è„šæœ¬ä¼šè‡ªåŠ¨å®‰è£… Node.js (â‰¥18)ã€Gitã€PM2 ç­‰ä¾èµ–ï¼Œæ— éœ€æå‰å‡†å¤‡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®è¿è¡Œï¼ˆæ¨èï¼‰

**å›½å†…ç½‘ç»œï¼ˆä½¿ç”¨åŠ é€Ÿé•œåƒï¼‰ï¼š**

```bash
curl -O https://ghfast.top/https://raw.githubusercontent.com/Mia1889/Ksilly/main/ksilly.sh && chmod +x ksilly.sh && ./ksilly.sh
```

**å›½é™…ç½‘ç»œï¼ˆç›´è¿ GitHubï¼‰ï¼š**

```bash
curl -O https://raw.githubusercontent.com/Mia1889/Ksilly/main/ksilly.sh && chmod +x ksilly.sh && ./ksilly.sh
```

> Linux å’Œ Termux ä½¿ç”¨ç›¸åŒçš„å‘½ä»¤ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨è¯†åˆ«è¿è¡Œç¯å¢ƒ

### å‘½ä»¤è¡Œæ¨¡å¼

å®‰è£…å®Œæˆåä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡å‚æ•°è°ƒç”¨ï¼š

```bash
bash ksilly.sh install     # å®‰è£…
bash ksilly.sh start       # å¯åŠ¨
bash ksilly.sh stop        # åœæ­¢
bash ksilly.sh restart     # é‡å¯
bash ksilly.sh status      # æŸ¥çœ‹çŠ¶æ€
bash ksilly.sh update      # æ›´æ–°
bash ksilly.sh plugins     # æ’ä»¶ç®¡ç†
bash ksilly.sh uninstall   # å¸è½½
```

ä¸å¸¦å‚æ•°åˆ™è¿›å…¥äº¤äº’å¼èœå•ã€‚

---

## ğŸ“– ä½¿ç”¨è¯´æ˜

### ä¸»èœå•

```
  å®‰è£…ä¸ç®¡ç†
     1) å®‰è£… SillyTavern
     2) æ›´æ–° SillyTavern
     3) å¸è½½ SillyTavern

  è¿è¡Œæ§åˆ¶
     4) å¯åŠ¨
     5) åœæ­¢
     6) é‡å¯
     7) æŸ¥çœ‹çŠ¶æ€

  é…ç½®ä¸ç»´æŠ¤
     8) ä¿®æ”¹é…ç½®
     9) åå°è¿è¡Œç®¡ç† (PM2)
    10) æ’ä»¶ç®¡ç†

     0) é€€å‡º
```

### å®‰è£…æµç¨‹

æ‰§è¡Œå®‰è£…åï¼Œè„šæœ¬ä¼šä¾æ¬¡å®Œæˆï¼š

1. **ç¯å¢ƒæ£€æµ‹** â€” è¯†åˆ«æ“ä½œç³»ç»Ÿå’ŒåŒ…ç®¡ç†å™¨
2. **ç½‘ç»œæ£€æµ‹** â€” åˆ¤æ–­æ˜¯å¦éœ€è¦ä½¿ç”¨å›½å†…åŠ é€Ÿé•œåƒ
3. **ä¾èµ–å®‰è£…** â€” è‡ªåŠ¨å®‰è£… Gitã€Node.js ç­‰
4. **å…‹éš†ä»“åº“** â€” å¯é€‰ `release`ï¼ˆç¨³å®šç‰ˆï¼‰æˆ– `staging`ï¼ˆå¼€å‘ç‰ˆï¼‰
5. **é…ç½®å‘å¯¼** â€” äº¤äº’å¼è®¾ç½®ç›‘å¬ã€ç«¯å£ã€è®¤è¯ç­‰
6. **æ’ä»¶å®‰è£…** â€” å¯é€‰å®‰è£…æ¨èæ’ä»¶ï¼ˆå…¨éƒ¨å®‰è£… / é€ä¸ªé€‰æ‹© / è·³è¿‡ï¼‰
7. **åå°è¿è¡Œ** â€” å¯é€‰é…ç½® PM2 åå°è¿è¡Œå’Œå¼€æœºè‡ªå¯

### é…ç½®ç®¡ç†

é€šè¿‡èœå• `8) ä¿®æ”¹é…ç½®` å¯éšæ—¶è°ƒæ•´ï¼š

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| ç›‘å¬æ¨¡å¼ | å¼€å¯åå…è®¸å±€åŸŸç½‘/å¤–ç½‘è®¾å¤‡è®¿é—® |
| ç«¯å£ | é»˜è®¤ 8000ï¼Œå¯è‡ªå®šä¹‰ |
| ç™½åå•æ¨¡å¼ | é™åˆ¶ä»…ç™½åå• IP å¯è®¿é—® |
| åŸºç¡€è®¤è¯ | HTTP ç”¨æˆ·å/å¯†ç è®¤è¯ |
| ç”¨æˆ·è´¦æˆ·ç³»ç»Ÿ | å¤šç”¨æˆ·ç‹¬ç«‹æ•°æ® |
| éšè”½ç™»å½• | ç™»å½•é¡µä¸æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ |

---

## ğŸ§© æ’ä»¶ç®¡ç†

é€šè¿‡èœå• `10) æ’ä»¶ç®¡ç†` è¿›å…¥æ’ä»¶ç®¡ç†ç•Œé¢ã€‚

### æ”¶å½•æ’ä»¶

| æ’ä»¶ | è¯´æ˜ | å›½é™…æº | å›½å†…æº |
|------|------|--------|--------|
| **é…’é¦†åŠ©æ‰‹** (JS-Slash-Runner) | ä¸ºé…’é¦†æä¾›æ›´å¼ºå¤§çš„è„šæœ¬è¿è¡Œèƒ½åŠ› | [GitHub](https://github.com/N0VI028/JS-Slash-Runner) | [GitLab](https://gitlab.com/novi028/JS-Slash-Runner) |
| **æç¤ºè¯æ¨¡æ¿** (ST-Prompt-Template) | æä¾›æç¤ºè¯æ¨¡æ¿ç®¡ç†åŠŸèƒ½ | [GitHub](https://github.com/zonde306/ST-Prompt-Template) | [Codeberg](https://codeberg.org/zonde306/ST-Prompt-Template) |

### æ’ä»¶èœå•

```
  å®‰è£…æ’ä»¶
    1) å®‰è£… é…’é¦†åŠ©æ‰‹
    2) å®‰è£… æç¤ºè¯æ¨¡æ¿
    3) å…¨éƒ¨å®‰è£…

  æ›´æ–°æ’ä»¶
    4) æ›´æ–° é…’é¦†åŠ©æ‰‹
    5) æ›´æ–° æç¤ºè¯æ¨¡æ¿
    6) å…¨éƒ¨æ›´æ–°

  å¸è½½æ’ä»¶
    7) å¸è½½ é…’é¦†åŠ©æ‰‹
    8) å¸è½½ æç¤ºè¯æ¨¡æ¿
    9) å…¨éƒ¨å¸è½½

    0) è¿”å›ä¸»èœå•
```

### ç½‘ç»œæºé€‰æ‹©

è„šæœ¬ä¼šæ ¹æ®ç½‘ç»œç¯å¢ƒè‡ªåŠ¨é€‰æ‹©æœ€ä½³æºï¼š

| ç½‘ç»œç¯å¢ƒ | ä¼˜å…ˆæº | å¤±è´¥å›é€€ |
|----------|--------|----------|
| å¤§é™†ç½‘ç»œ | GitLab / Codeberg é•œåƒ | GitHub ä»£ç†åŠ é€Ÿ |
| å›½é™…ç½‘ç»œ | GitHub ç›´è¿ | é•œåƒæºå›é€€ |

> æ’ä»¶å®‰è£… / æ›´æ–° / å¸è½½åï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æç¤ºé‡å¯ SillyTavern ä»¥ä½¿å˜æ›´ç”Ÿæ•ˆ

---

## ğŸ”§ PM2 åå°ç®¡ç†

é€šè¿‡èœå• `9) åå°è¿è¡Œç®¡ç†` å¯ä»¥ï¼š

- å¯åŠ¨ / åœæ­¢ / é‡å¯ SillyTavern
- æŸ¥çœ‹å®æ—¶æ—¥å¿—æˆ–å†å²æ—¥å¿—
- è®¾ç½® / ç§»é™¤å¼€æœºè‡ªå¯
- ç®¡ç† PM2 è¿›ç¨‹

---

## ğŸ“± Termux ä½¿ç”¨è¯´æ˜

1. å®‰è£… [Termux](https://f-droid.org/packages/com.termux/)ï¼ˆæ¨èä» F-Droid ä¸‹è½½ï¼‰
2. æ‰“å¼€ Termuxï¼Œç²˜è´´ä¸Šæ–¹å®‰è£…å‘½ä»¤è¿è¡Œ
3. å¦‚éœ€å¼€æœºè‡ªå¯ï¼Œå®‰è£… [Termux:Boot](https://f-droid.org/packages/com.termux.boot/) å¹¶åœ¨è„šæœ¬ä¸­é…ç½®

> Termux ç¯å¢ƒä¸‹è„šæœ¬ä¼šè‡ªåŠ¨ä½¿ç”¨ `pkg` åŒ…ç®¡ç†å™¨ï¼Œæ— éœ€ root æƒé™

---

## ğŸ“ æ–‡ä»¶è¯´æ˜

```
~/SillyTavern/                                          # é»˜è®¤å®‰è£…ç›®å½•ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
â”œâ”€â”€ server.js                                           # SillyTavern ä¸»ç¨‹åº
â”œâ”€â”€ config.yaml                                         # è¿è¡Œé…ç½®
â”œâ”€â”€ default.yaml                                        # é»˜è®¤é…ç½®æ¨¡æ¿
â”œâ”€â”€ data/                                               # ç”¨æˆ·æ•°æ®ï¼ˆèŠå¤©è®°å½•ã€è§’è‰²å¡ç­‰ï¼‰
â”œâ”€â”€ ksilly.sh                                           # ç®¡ç†è„šæœ¬å‰¯æœ¬
â”œâ”€â”€ public/scripts/extensions/third-party/              # ç¬¬ä¸‰æ–¹æ’ä»¶ç›®å½•
â”‚   â”œâ”€â”€ JS-Slash-Runner/                                # é…’é¦†åŠ©æ‰‹æ’ä»¶
â”‚   â””â”€â”€ ST-Prompt-Template/                             # æç¤ºè¯æ¨¡æ¿æ’ä»¶
â””â”€â”€ ...

~/.ksilly.conf                                          # Ksilly è„šæœ¬é…ç½®
```

---

## â“ å¸¸è§é—®é¢˜

<details>
<summary><b>å›½å†…å…‹éš†å¤±è´¥ / ä¸‹è½½è¶…æ—¶</b></summary>

è„šæœ¬å·²å†…ç½®å¤šä¸ª GitHub ä»£ç†è‡ªåŠ¨åˆ‡æ¢ã€‚å¦‚ä»å¤±è´¥ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
- å°è¯•æ›´æ¢ç½‘ç»œç¯å¢ƒï¼ˆå¦‚æ‰‹æœºçƒ­ç‚¹ï¼‰
- æ‰‹åŠ¨è®¾ç½®ä»£ç†åé‡è¯•
</details>

<details>
<summary><b>æ’ä»¶å®‰è£…å¤±è´¥</b></summary>

- è„šæœ¬ä¼šè‡ªåŠ¨åˆ‡æ¢å›½é™…/å›½å†…æºï¼Œä¸¤ä¸ªæºéƒ½å¤±è´¥æ—¶è¯·æ£€æŸ¥ç½‘ç»œ
- ç¡®è®¤ SillyTavern å·²æ­£ç¡®å®‰è£…ä¸”ç›®å½•ç»“æ„å®Œæ•´
- æ‰‹åŠ¨æ£€æŸ¥æ’ä»¶ç›®å½•æ˜¯å¦å­˜åœ¨ï¼š`ls ~/SillyTavern/public/scripts/extensions/third-party/`
- ä¹Ÿå¯ä»¥æ‰‹åŠ¨ `git clone` åˆ°ä¸Šè¿°ç›®å½•åé‡å¯ SillyTavern
</details>

<details>
<summary><b>æ’ä»¶å®‰è£…åä¸ç”Ÿæ•ˆ</b></summary>

- å®‰è£… / æ›´æ–° / å¸è½½æ’ä»¶åéœ€è¦é‡å¯ SillyTavern
- è„šæœ¬ä¼šè‡ªåŠ¨æç¤ºé‡å¯ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨é€šè¿‡èœå• `6) é‡å¯` æ“ä½œ
- åœ¨ SillyTavern ç½‘é¡µç«¯è¿›å…¥ æ‰©å±• â†’ ç®¡ç†æ‰©å±• ç¡®è®¤æ’ä»¶å·²åŠ è½½
</details>

<details>
<summary><b>ç«¯å£è¢«å ç”¨</b></summary>

ä¿®æ”¹ç«¯å£å·ï¼ˆèœå• 8 â†’ é€‰é¡¹ 2ï¼‰ï¼Œæˆ–æŸ¥çœ‹å ç”¨è¿›ç¨‹ï¼š
```bash
lsof -i :8000
# æˆ–
ss -tlnp | grep 8000
```
</details>

<details>
<summary><b>è¿œç¨‹è®¾å¤‡æ— æ³•è®¿é—®</b></summary>

è¯·ç¡®è®¤ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç›‘å¬æ¨¡å¼å·²å¼€å¯ï¼ˆ`listen: true`ï¼‰
2. ç™½åå•æ¨¡å¼å·²å…³é—­ï¼ˆ`whitelistMode: false`ï¼‰
3. é˜²ç«å¢™å·²æ”¾è¡Œå¯¹åº”ç«¯å£
4. **äº‘æœåŠ¡å™¨**éœ€åœ¨å®‰å…¨ç»„ä¸­æ”¾è¡Œç«¯å£
</details>

<details>
<summary><b>Termux åå°è¢«æ€</b></summary>

- åœ¨ Android è®¾ç½®ä¸­å…³é—­ Termux çš„ç”µæ± ä¼˜åŒ–
- å®‰è£… Termux:Boot å¹¶åœ¨è„šæœ¬ä¸­é…ç½®å¼€æœºè‡ªå¯
- è¿è¡Œ `termux-wake-lock` ä¿æŒåå°
</details>

<details>
<summary><b>æ›´æ–°åé…ç½®ä¸¢å¤±</b></summary>

ä¸ä¼šä¸¢å¤±ã€‚è„šæœ¬æ›´æ–°å‰ä¼šè‡ªåŠ¨å¤‡ä»½é…ç½®åˆ° `~/.ksilly_backup_æ—¥æœŸæ—¶é—´/`ï¼Œæ›´æ–°å®Œæˆåè‡ªåŠ¨æ¢å¤ã€‚
</details>

---

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)

---

<div align="center">

**å¦‚æœè§‰å¾—å¥½ç”¨ï¼Œç»™ä¸ª â­ Star å§~**
